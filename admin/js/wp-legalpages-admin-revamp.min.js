var jQuery=jQuery.noConflict(),jQuery=jQuery.noConflict();jQuery(document).ready(function(){function a(a){var b=jQuery('<div class="wplegal-ajax-spinner"></div>');jQuery("#wpbody-content").append(b),jQuery.ajax({type:"POST",url:wplp_localize_data.ajaxurl,data:{action:"wp_legal_pages_app_store_auth",_ajax_nonce:wplp_localize_data._ajax_nonce,response:a.response,origin:a.origin},success:function(a){b.hide(),localStorage.removeItem("wplegalConnectPopupHide"),localStorage.removeItem("wplegalDisconnect"),setTimeout(function(){location.reload()},100)},error:function(a){console.error("Error sending data to PHP:",a)}})}function b(a){a.preventDefault();var b=this.classList.contains("wplegal-api-connect-new"),c=jQuery('<div class="wplegal-ajax-spinner"></div>'),d=jQuery("#wpbody-content");d.css("position","relative"),d.append(c),jQuery.ajax({url:wplp_localize_data.ajaxurl,type:"POST",data:{action:"wp_legal_pages_app_start_auth",_ajax_nonce:wplp_localize_data._ajax_nonce,is_new_user:b},beforeSend:function(){c.show()},complete:function(){c.hide()}}).done(function(a){var b=window.innerWidth,c=window.innerHeight,d=367,e=650,f=(b-d)/2,g=(c-e)/2,h=window.open(a.data.url,"_blank","location=no,width="+d+",height="+e+",left="+f+",top="+g+",scrollbars=0");null===h?console.log("Failed to open the authentication window"):h.focus()})}function c(){jQuery("#wplegal-wpcc-notice").hide(),localStorage.setItem("wplegalConnectPopupHide","true")}function d(){jQuery("#wplegal-disconnect-wpcc-notice").hide(),localStorage.setItem("wplegalConnectPopupHide","true")}function e(){var a=jQuery('<div class="wplegal-ajax-spinner"></div>'),b=jQuery(".wplegal-connection-tab-card");b.css("position","relative"),b.append(a),jQuery.ajax({url:wplp_localize_data.ajaxurl,type:"POST",data:{action:"wp_legal_pages_app_delete_auth",_ajax_nonce:wplp_localize_data._ajax_nonce},beforeSend:function(){a.show()},complete:function(){a.hide()}}).done(function(a){localStorage.removeItem("wplegalConnectPopupHide"),localStorage.setItem("wplegalDisconnect","true"),setTimeout(function(){location.reload()},100)})}const f=wplp_localize_data.is_pro_activated,g=wplp_localize_data.admin_url,h=wplp_localize_data.lp_terms,i=wplp_localize_data.is_user_connected;f&&(jQuery(".wp-legalpages-admin-tabs-section").addClass("pro-is-activated"),jQuery(".wp-legalpages-admin-tab").addClass("pro-is-activated")),"1"!=h&&(jQuery(".wp-legalpages-admin-tab .wp-legalpages-admin-tab-name").addClass("lp-terms-not-acpt"),jQuery(".wplegal-help-card").addClass("lp-terms-not-acpt"),jQuery(".wplegal-container .wplegal-container-features .wplegal-features-section .wplegal-section-content .wplegal-feature").addClass("lp-terms-not-acpt"),jQuery(".wp-legalpages-admin-help-and-support .wp-legalpages-admin-help-text").addClass("lp-terms-not-acpt"),jQuery(".wp-legalpages-admin-help-and-support .wp-legalpages-admin-support-text").addClass("lp-terms-not-acpt")),jQuery(".wp-legalpages-admin-tab-content").not(":first").hide(),jQuery(".wp-legalpages-admin-getting-started-tab").addClass("active-tab"),jQuery("#getting_started").show(),jQuery(".wp-legalpages-admin-create_legalpages-tab").on("click",function(){window.location.href=g+"index.php?page=wplegal-wizard"}),jQuery(".wp-legalpages-admin-tabs").on("click",".wp-legalpages-admin-tab:not(.wp-legalpages-admin-create_legalpages-tab)",function(a){a.preventDefault();var b=jQuery(this).data("tab");jQuery(".wp-legalpages-admin-tab").removeClass("active-tab"),jQuery(".wp-legalpages-admin-tab-content").hide(),jQuery("#"+b).show(),jQuery(this).addClass("active-tab"),history.pushState({},"","#"+b)});var j=window.location.hash;if(j){var k=j.substring(1);k.includes("settings#")&&(k="settings"),jQuery(".wp-legalpages-admin-tab").removeClass("active-tab"),jQuery(".wp-legalpages-admin-tab-content").hide(),jQuery("#"+k).show(),jQuery('[data-tab="'+k+'"]').addClass("active-tab")}"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.addEventListener("message",function(b){b.isTrusted&&b.origin===wplp_localize_data.wplegal_app_url&&a(b.data)}),jQuery(".wplegal-api-connect-existing").on("click",b);var l=jQuery(".wp-legalpages-admin-fixed-banner");jQuery("#wplegal-wpcc-notice").insertAfter(l),jQuery("#wplegal-disconnect-wpcc-notice").insertAfter(l),i?(jQuery("#wplegal-wpcc-notice").removeClass("wplegal-hidden"),jQuery("#wplegal-wpcc-notice").show()):"true"===localStorage.getItem("wplegalDisconnect")&&(jQuery("#wplegal-disconnect-wpcc-notice").removeClass("wplegal-hidden"),jQuery("#wplegal-disconnect-wpcc-notice").show()),"true"===localStorage.getItem("wplegalConnectPopupHide")&&(jQuery("#wplegal-wpcc-notice").hide(),jQuery("#wplegal-disconnect-wpcc-notice").hide()),jQuery("#wplegal-wpcc-notice .notice-dismiss").on("click",c),jQuery("#wplegal-disconnect-wpcc-notice .notice-dismiss").on("click",d),jQuery(".wplegal-api-connection-disconnect-btn").on("click",e)});